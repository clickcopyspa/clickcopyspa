<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description" content="A simple webapp for managing numberplates for digital permitting">
    <title>Permit Management</title>
    <link rel="stylesheet" href="css/style.css?v=7">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1/dist/fancybox/fancybox.css" media="none"
          onload="this.media='all'"/>
    <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
    <style>
        html.dark {
            background: #000;
        }
    </style>
    <script type="text/javascript">

        const savedDarkMode = window.localStorage.getItem("permitsLightDarkMode");
        if (!savedDarkMode) {
            const darkModeMql = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)');
            if (darkModeMql && darkModeMql.matches) {
                // dark mode
                document.documentElement.classList.add("dark");

            } else {
                // light mode
                document.documentElement.classList.add("light");

            }
        } else if (savedDarkMode === "light") {
            document.documentElement.classList.add("light");

        } else if (savedDarkMode === "dark") {
            document.documentElement.classList.add("dark");

        }
    </script>
</head>

<body style="opacity:0;">

<main>
    <span class="help-wrapper" title="Help" data-fancybox src="#helptext"><a class="help">?</a></span>
    <span class="github-wrapper" title="View the Github page"><a href="https://github.com/lindymad/permits"
                                                                 target="_blank"><img
            alt="Github Logo" src="img/GitHub_Invertocat_White.png" class="github-logo dark"><img
            alt="Github Logo" src="img/GitHub_Invertocat_Black.png" class="github-logo light"></a></span>
    <span class="qr-wrapper" title="Share via QR code" data-fancybox src="#qrcode"><img src="img/qr-code.png"
                                                                                        alt="QR Code thumbnail"></span>
    <span class="light-dark-toggle-wrapper" title="Toggle Dark Mode">
            <span class="toggle-switch">
                <label for="light-dark-toggle">
                    <input type="checkbox" id="light-dark-toggle">
                    <span class="slider"></span>
                </label>
            </span>
        </span>
    <span class="country-picker" title="Choose Country">
            <span class="selected" data-fancybox src="#flags"><img alt="Current Country Flag" src=""></span>
        </span>
    <script type="text/javascript">
        //const savedDarkMode = window.localStorage.getItem("permitsLightDarkMode");
        if (!savedDarkMode) {
            const darkModeMql = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)');
            if (darkModeMql && darkModeMql.matches) {
                // dark mode
                document.getElementById("light-dark-toggle").checked = false;
            } else {
                // light mode
                document.getElementById("light-dark-toggle").checked = true;
            }
        } else if (savedDarkMode === "light") {

            document.getElementById("light-dark-toggle").checked = true;
        } else if (savedDarkMode === "dark") {

            document.getElementById("light-dark-toggle").checked = false;
        }
    </script>

    <h1 id="permits-header">
        Permits
        <span class="buttons">
                <button id="add-permit" data-fancybox src="#addeditformwrapper">Add</button>
                <button id="export-permits">Export</button>
                <button id="import-permits">Import</button>
            </span>
    </h1>

    <div class="tabs-wrapper">
        <div class="tabs">
            <div class="tab frequent active">Frequent</div>
            <div class="tab occasional">Occasional</div>
            <div class="tab filter">
                <label for="filter" class="filter">Filter</label>
                <input id="filter" placeholder="" type="text">
            </div>
        </div>

        <div class="content">
            <div id="permits-list"></div>
        </div>
    </div>

    <div id="addeditformwrapper" style="display:none;">
        <form action="#" id="addeditform">
            <input type="hidden" id="addEditIsNew" value="">
            <input type="hidden" id="addEditId" value="">
            <div class="row"><label for="addEditName">Name</label><input type="text" id="addEditName"></div>
            <div class="row"><label for="addEditNumberPlate">Numberplate</label><input type="text"
                                                                                       id="addEditNumberPlate">
            </div>
            <div class="row"><label for="addEditUsage">Usage</label><select id="addEditUsage">
                <option value="frequent">Frequent</option>
                <option value="occasional">Occasional</option>
            </select></div>
            <div class="row buttons-row"><input type="submit" value="Save" class="saveEntry"> <input type="reset"
                                                                                                     value="Clear"
                                                                                                     class="clearEntry">
                <input type="button" value="Cancel" data-fancybox-close class="cancelEntry">
            </div>
        </form>
    </div>
    <div id="importEntries" style="display:none;">

    </div>
    <div id="qrcode" style="display:none;">
        <img src="img/qr-code.png" alt="QR Code">
        <a href="https://lindymad.github.io/permits/">https://lindymad.github.io/permits/</a>
    </div>
    <div id="deleteEntry" style="display:none;">
        <input id="delete-confirm-id" value="" type="hidden">
        <h2>Are you sure you want to delete this entry?</h2>
        <p>Name: <strong class="delete-confirm-name"></strong></p>
        <p>Numberplate: <strong class="delete-confirm-numberplate"></strong></p>
        <div class="row buttons-row"><input class="danger delete-entry-for-sure" type="button" value="Yes"><input
                type="button" class="cancel" data-fancybox-close value="No"></div>
    </div>
    <div id="flags" style="display:none;">
        <h1>Country Picker</h1>
        <p>This determines how the number plate/license plate/registration plate looks on the page.</p>
        <div id="flags-picker">
            <div><a href="javascript:void(0)" class="set-country"><img data-flag="gb" class='country-flag' alt="GB Flag"
                                                                       src="img/flags/gb.png"></a><span>gb</span></div>
            <div><a href="javascript:void(0)" class="set-country"><img data-flag="us" class='country-flag' alt="US Flag"
                                                                       src="img/flags/us.png"></a><span>us</span></div>
            <div><a href="javascript:void(0)" class="set-country"><img data-flag="earth" class='country-flag'
                                                                       alt="Earth Image"
                                                                       src="img/flags/earth.png"></a><span>other</span>
            </div>
        </div>
        <p id="add">To add a country, please open an issue on the <a href="https://github.com/lindymad/permits"
                                                                     target="_blank">github page</a>.
            Please be sure to include a link to the relevant country flag from <a
                    href="https://www.flaticon.com/packs/countrys-flags">https://www.flaticon.com/packs/countrys-flags</a>
            and an idea of how it should look.</p>
    </div>
    <div id="helptext" style="display:none;">
        <h1>Help</h1>
        <h2>What is this?</h2>
        <p>The neighbourhood where my Mum lives recently implemented digital permitting, which means that when
            someone
            comes to visit, she has to enter their numberplate into a permitting system on her ipad.</p>
        <p>The app she uses to do this does not keep a history of number plates, or allow the number plate to be
            named,
            so she constantly had to re-ask people what their numberplates are.</p>
        <p>I made this app so that she could have a history of numberplates for when her friends and family come to
            visit.</p>
        <h2>How do I use it?</h2>
        <p>Simply click the "Add" button on the main page to add numberplates. The name and numberplate are stored
            directly in your browser, which means you will only see them when you open this page with this browser
            on this device.</p>
        <p>Once you have added your numberplates, click on a numberplate to copy it and you can paste it into your
            permits
            app</p>
        <p>You can also edit and delete your numberplates</p>
        <p>You can manually export your data and import it into another browser/device by clicking on the export
            button.</p>
        <h2>Is my data safe?</h2>
        <p>Yes. This system runs directly on github using the code at
            <a href="https://github.com/lindymad/permits" target="_blank">https://github.com/lindymad/permits</a>.
            All of your data is saved in your browser. We recommend exporting your data whenever you make a change
            and
            keeping it somewhere safe, just in case you lose access to the browser or device.
        </p>
        <p>You can access this page from any browser on any device, but you will only see data that you have added
            (or
            imported) on that browser and device.</p>
        <h2>Why not just use notes?</h2>
        <p>Notes (or any other app where you can paste text) works just fine for this, but it's a bit more fiddly to
            copy and paste number plates. You also have to find the right note, and then search for the person you are looking for.</p>
        <p>With this webapp, the number plates that you most frequently use are right there as soon as you open the page and
            it's extremely easy to copy them by simply clicking on the number plate. It just makes the process easier, especially
        for those who struggle with copying and pasting text from their phone or tablet.</p>
    </div>
</main>
<script defer src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.1/dist/fancybox/fancybox.umd.js"></script>
<script defer src="permits.js?v=7"></script>
</body>

</html>
